{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"SingleProduct\",\n  data() {\n    return {\n      product: {\n        id: 0,\n        user_id: 0,\n        name: \"\",\n        manufacture_date: \"\",\n        expiry_date: \"\",\n        price: 0,\n        rate_per_unit: \"\",\n        stock: 0,\n        category: {\n          name: \"\",\n          id: 0\n        }\n      },\n      formData: {\n        product_name: \"\",\n        manufacture_date: \"\",\n        expiry_date: \"\",\n        price: 0,\n        rate_per_unit: \"\",\n        stock: 0\n      }\n    };\n  },\n  async mounted() {\n    const product_id = this.$route.params.product_id;\n    const category_id = this.$route.params.category_id;\n    const response = await fetch(`http://localhost:5000/api/getProduct/${category_id}/${product_id}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authentication-Token\": localStorage.getItem(\"auth-token\")\n      }\n    });\n    const data = await response.json();\n    console.log(data);\n    if (response.ok) {\n      this.product = data;\n      this.formData.product_name = data.name;\n      this.formData.manufacture_date = data.manufacture_date;\n      this.formData.expiry_date = data.expiry_date;\n      this.formData.price = data.price;\n      this.formData.rate_per_unit = data.rate_per_unit;\n      this.formData.stock = data.stock;\n    } else {\n      alert(\"Failed to display\");\n    }\n  },\n  computed: {\n    category_id() {\n      return this.$route.params.category_id;\n    },\n    currentUserEmail() {\n      return this.$store.state.currentUserEmail;\n    },\n    isProductOwner() {\n      return this.$store.state.currentUserId == this.product.user_id;\n    },\n    currentUserId() {\n      return this.$store.state.currentUserId;\n    },\n    currentUserName() {\n      return this.$store.state.currentUsername;\n    },\n    isUser() {\n      return this.account.roles.includes(\"<Role 2>\");\n    }\n  },\n  methods: {\n    async deleteProduct(p_id) {\n      const category_id = this.$route.params.category_id;\n      const response = await fetch(`http://localhost:5000/api/deleteProduct/${p_id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authentication-Token\": localStorage.getItem(\"auth-token\")\n        }\n      });\n      const data = await response.json();\n      console.log(data);\n      if (response.ok) {\n        this.$router.push(`/category_products/${category_id}`);\n      }\n    },\n    confirmDeleteProduct(p_id) {\n      const isConfirmed = window.confirm(\"Are you sure you want to delete this product?\");\n      if (isConfirmed) {\n        this.deleteProduct(p_id);\n      }\n    },\n    async editProduct(p_id) {\n      const isConfirmed = window.confirm(\"Are you sure you want to edit this product?\");\n      if (!isConfirmed) {\n        return;\n      }\n      if (!this.formData.manufacture_date) {\n        this.formData.manufacture_date = \"Not Available\";\n      }\n      if (!this.formData.expiry_date) {\n        this.formData.expiry_date = \"Not Available\";\n      }\n      const formdata = new FormData();\n      formdata.append(\"product_name\", this.formData.product_name);\n      formdata.append(\"manufacture_date\", this.formData.manufacture_date);\n      formdata.append(\"expiry_date\", this.formData.expiry_date);\n      formdata.append(\"price\", this.formData.price);\n      formdata.append(\"rate_per_unit\", this.formData.rate_per_unit);\n      formdata.append(\"stock\", this.formData.stock);\n      const _response = await fetch(`http://localhost:5000/api/editProduct/${p_id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Authentication-Token\": localStorage.getItem(\"auth-token\")\n        },\n        body: formdata\n      });\n      const data = await _response.json();\n      console.log(data);\n      if (_response.ok) {\n        this.product = data;\n      } else {\n        alert(\"You are not authorized to edit Product\");\n      }\n    },\n    logout() {\n      this.$router.push(\"/\");\n    }\n  }\n};","map":{"version":3,"names":["name","data","product","id","user_id","manufacture_date","expiry_date","price","rate_per_unit","stock","category","formData","product_name","mounted","product_id","$route","params","category_id","response","fetch","method","headers","localStorage","getItem","json","console","log","ok","alert","computed","currentUserEmail","$store","state","isProductOwner","currentUserId","currentUserName","currentUsername","isUser","account","roles","includes","methods","deleteProduct","p_id","$router","push","confirmDeleteProduct","isConfirmed","window","confirm","editProduct","formdata","FormData","append","_response","body","logout"],"sources":["C:\\Users\\mahak\\Downloads\\21f2000845-freshcart\\Mad 2 project\\freshcart\\src\\components\\single_product.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <div style=\"margin-left: 550px; margin-top: -10px\">\n      <router-link to=\"/\" class=\"logout-link\" @click=\"logout\">\n        Logout </router-link\n      >&nbsp;&nbsp;\n      <router-link :to=\"'/category_products/' + category_id\" class=\"btn-dark\"\n        >Back</router-link\n      >\n    </div>\n    <div class=\"edit-product\">\n      <h3 class=\"title\">Product Details</h3>\n\n      <div class=\"product-details\">\n        <div class=\"detail-item\"><strong>Name:</strong> {{ product.name }}</div>\n        <div class=\"detail-item\">\n          <strong>Manufacture Date:</strong>\n          {{\n            product.manufacture_date\n              ? product.manufacture_date\n              : \"Not Available\"\n          }}\n        </div>\n        <div class=\"detail-item\">\n          <strong>Expiry Date:</strong>\n          {{ product.expiry_date ? product.expiry_date : \"Not Available\" }}\n        </div>\n\n        <div class=\"detail-item\">\n          <strong>Price:</strong> {{ product.price }}\n        </div>\n        <div class=\"detail-item\">\n          <strong>Rate per Unit:</strong> {{ product.rate_per_unit }}\n        </div>\n        <div class=\"detail-item\">\n          <strong>Stock:</strong> {{ product.stock }}\n        </div>\n        <div class=\"detail-item\">\n          <strong>Category:</strong> {{ product.category.name }}\n        </div>\n        <div>\n          <button\n            v-if=\"isProductOwner\"\n            class=\"delete\"\n            @click=\"confirmDeleteProduct(product.id)\"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"isProductOwner\" class=\"edit-product\">\n      <h3 class=\"title\">Edit Product</h3>\n      <div class=\"form-group\">\n        <div class=\"form-column\">\n          <label for=\"product_name\" class=\"form-label\">Product Name:</label>\n          <input\n            type=\"text\"\n            v-model=\"formData.product_name\"\n            required\n            class=\"form-input\"\n          />\n        </div>\n        <div class=\"form-column\">\n          <label for=\"manufacture_date\" class=\"form-label\"\n            >Manufacture Date:</label\n          >\n          <input\n            type=\"date\"\n            v-model=\"formData.manufacture_date\"\n            class=\"form-input\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"form-column\">\n          <label for=\"expiry_date\" class=\"form-label\">Expiry Date:</label>\n          <input\n            type=\"date\"\n            v-model=\"formData.expiry_date\"\n            class=\"form-input\"\n          />\n        </div>\n        <div class=\"form-column\">\n          <label for=\"price\" class=\"form-label\">Product Price:</label>\n          <input\n            type=\"number\"\n            v-model=\"formData.price\"\n            required\n            class=\"form-input\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"form-column\">\n          <label for=\"rate_per_unit\" class=\"form-label\">Rate per Unit:</label>\n          <select v-model=\"formData.rate_per_unit\" class=\"form-select\">\n            <option value=\"kg\">Rs/kg</option>\n            <option value=\"lit\">Rs/lit</option>\n            <option value=\"pack\">Rs/pack</option>\n            <option value=\"piece\">Rs/piece</option>\n          </select>\n        </div>\n        <div class=\"form-column\">\n          <label for=\"stock\" class=\"form-label\">Product Stock:</label>\n          <input\n            type=\"number\"\n            v-model=\"formData.stock\"\n            required\n            class=\"form-input\"\n          />\n        </div>\n      </div>\n      <button @click.prevent=\"editProduct(product.id)\" class=\"create-button\">\n        Edit Product\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SingleProduct\",\n  data() {\n    return {\n      product: {\n        id: 0,\n        user_id: 0,\n        name: \"\",\n        manufacture_date: \"\",\n        expiry_date: \"\",\n        price: 0,\n        rate_per_unit: \"\",\n        stock: 0,\n        category: {\n          name: \"\",\n          id: 0,\n        },\n      },\n      formData: {\n        product_name: \"\",\n        manufacture_date: \"\",\n        expiry_date: \"\",\n        price: 0,\n        rate_per_unit: \"\",\n        stock: 0,\n      },\n    };\n  },\n  async mounted() {\n    const product_id = this.$route.params.product_id;\n    const category_id = this.$route.params.category_id;\n    const response = await fetch(\n      `http://localhost:5000/api/getProduct/${category_id}/${product_id}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authentication-Token\": localStorage.getItem(\"auth-token\"),\n        },\n      }\n    );\n    const data = await response.json();\n    console.log(data);\n    if (response.ok) {\n      this.product = data;\n      this.formData.product_name = data.name;\n      this.formData.manufacture_date = data.manufacture_date;\n      this.formData.expiry_date = data.expiry_date;\n      this.formData.price = data.price;\n      this.formData.rate_per_unit = data.rate_per_unit;\n      this.formData.stock = data.stock;\n    } else {\n      alert(\"Failed to display\");\n    }\n  },\n  computed: {\n    category_id() {\n      return this.$route.params.category_id;\n    },\n    currentUserEmail() {\n      return this.$store.state.currentUserEmail;\n    },\n    isProductOwner() {\n      return this.$store.state.currentUserId == this.product.user_id;\n    },\n    currentUserId() {\n      return this.$store.state.currentUserId;\n    },\n    currentUserName() {\n      return this.$store.state.currentUsername;\n    },\n    isUser() {\n      return this.account.roles.includes(\"<Role 2>\");\n    },\n  },\n  methods: {\n    async deleteProduct(p_id) {\n      const category_id = this.$route.params.category_id;\n      const response = await fetch(\n        `http://localhost:5000/api/deleteProduct/${p_id}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authentication-Token\": localStorage.getItem(\"auth-token\"),\n          },\n        }\n      );\n      const data = await response.json();\n      console.log(data);\n      if (response.ok) {\n        this.$router.push(`/category_products/${category_id}`);\n      }\n    },\n\n    confirmDeleteProduct(p_id) {\n      const isConfirmed = window.confirm(\n        \"Are you sure you want to delete this product?\"\n      );\n      if (isConfirmed) {\n        this.deleteProduct(p_id);\n      }\n    },\n    async editProduct(p_id) {\n      const isConfirmed = window.confirm(\n        \"Are you sure you want to edit this product?\"\n      );\n      if (!isConfirmed) {\n        return;\n      }\n      if (!this.formData.manufacture_date) {\n        this.formData.manufacture_date = \"Not Available\";\n      }\n\n      if (!this.formData.expiry_date) {\n        this.formData.expiry_date = \"Not Available\";\n      }\n      const formdata = new FormData();\n      formdata.append(\"product_name\", this.formData.product_name);\n      formdata.append(\"manufacture_date\", this.formData.manufacture_date);\n      formdata.append(\"expiry_date\", this.formData.expiry_date);\n      formdata.append(\"price\", this.formData.price);\n      formdata.append(\"rate_per_unit\", this.formData.rate_per_unit);\n      formdata.append(\"stock\", this.formData.stock);\n      const _response = await fetch(\n        `http://localhost:5000/api/editProduct/${p_id}`,\n        {\n          method: \"PUT\",\n          headers: {\n            \"Authentication-Token\": localStorage.getItem(\"auth-token\"),\n          },\n          body: formdata,\n        }\n      );\n      const data = await _response.json();\n      console.log(data);\n      if (_response.ok) {\n        this.product = data;\n      } else {\n        alert(\"You are not authorized to edit Product\");\n      }\n    },\n    logout() {\n      this.$router.push(\"/\");\n    },\n  },\n};\n</script>\n<style scoped>\n#app {\n  max-width: 800px;\n  margin: 0 auto;\n  font-size: 18px;\n  padding: 30px;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  background: linear-gradient(to right, #a9f160, #87cefa);\n}\n\n.product-title {\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: #333;\n}\n.title {\n  font-size: 30px;\n  text-decoration: underline;\n  margin-bottom: 30px;\n  text-align: center;\n}\n\n.product-details {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n  text-align: left;\n  margin-top: 20px;\n}\n\n.detail-item {\n  padding: 10px;\n  background-color: white;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n.detail-item strong {\n  margin-right: 8px;\n}\n\n.logout-link,\n.btn-dark {\n  text-decoration: none;\n  background-color: black;\n  color: #fff;\n  padding: 8px;\n  border-radius: 4px;\n  display: inline-block;\n  margin-top: 20px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.logout-link:hover {\n  background-color: #0056b3;\n}\n\n.new-product,\n.edit-product {\n  margin-top: 20px;\n  border: 1px solid #ddd;\n  padding: 15px;\n  border-radius: 5px;\n  background-color: white;\n}\n\n.form-group {\n  margin-bottom: 15px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.form-column {\n  flex: 1;\n  margin-right: 10px;\n}\n\n.form-label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-input,\n.form-select {\n  width: 100%;\n  padding: 8px;\n  box-sizing: border-box;\n}\n\n.create-button,\n.delete {\n  background-color: #28a745;\n  color: #fff;\n  padding: 8px 12px;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n  font-size: 14px;\n  margin-top: 10px;\n}\n\n.create-button:hover,\n.edit-button:hover {\n  background-color: #218838;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}