{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"searchProduct\",\n  data() {\n    return {\n      searchParams: {\n        stock: false,\n        category: null,\n        product_name: \"\",\n        manufacture_date: \"\",\n        expiry_date: \"\",\n        min_price: null,\n        max_price: null\n      },\n      products: [],\n      categories: [],\n      errorMessage: \"\"\n    };\n  },\n  computed: {\n    currentUserEmail() {\n      return this.$store.state.currentUserEmail;\n    },\n    isProductOwner() {\n      return this.$store.state.currentUserId == this.product.user_id;\n    },\n    currentUserId() {\n      return this.$store.state.currentUserId;\n    },\n    currentUserName() {\n      return this.$store.state.currentUsername;\n    },\n    isUser() {\n      return this.account.roles.includes(\"<Role 2>\");\n    }\n  },\n  mounted() {\n    this.fetchCategories();\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const response = await fetch(\"http://localhost:5000/api/getCategory\");\n        const data = await response.json();\n        this.categories = data;\n        if (!this.isProductOwner) {\n          alert(\"You are not authorized to view this page\");\n          this.$router.push(\"/\");\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch categories:\", error);\n      }\n    },\n    async searchProducts() {\n      try {\n        const formData = new FormData();\n        Object.entries(this.searchParams).forEach(([key, value]) => {\n          if (value !== null && value !== undefined && value !== \"\") {\n            formData.append(key, value);\n          }\n        });\n        formData.append(\"stock\", this.searchParams.stock);\n        const response = await fetch(\"http://localhost:5000/api/search\", {\n          method: \"POST\",\n          body: formData\n        });\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Failed to fetch products\");\n        }\n        const responseData = await response.json();\n        this.products = responseData;\n        this.errorMessage = \"\";\n      } catch (error) {\n        this.products = [];\n        console.log(\"Error:\", error);\n        this.errorMessage = error.message || \"Failed to fetch products\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","searchParams","stock","category","product_name","manufacture_date","expiry_date","min_price","max_price","products","categories","errorMessage","computed","currentUserEmail","$store","state","isProductOwner","currentUserId","product","user_id","currentUserName","currentUsername","isUser","account","roles","includes","mounted","fetchCategories","methods","response","fetch","json","alert","$router","push","error","console","searchProducts","formData","FormData","Object","entries","forEach","key","value","undefined","append","method","body","ok","errorData","Error","message","responseData","log"],"sources":["C:\\Users\\mahak\\Downloads\\21f2000845-freshcart main\\Mad 2 project\\freshcart\\src\\components\\search.vue"],"sourcesContent":["<template>\n  <div class=\"search-container\">\n    <button>\n      <router-link\n        :to=\"'/user_dashboard/' + currentUserEmail\"\n        class=\"back-button\"\n      >\n        Back\n      </router-link>\n    </button>\n    <h2 class=\"page-title\">Product Search</h2>\n    <form @submit.prevent=\"searchProducts\" class=\"search-form\">\n      <div class=\"filter-section\">\n        <div class=\"filter-item\">\n          <label for=\"category_name\" class=\"filter-label\">Category:</label>\n          <select v-model=\"searchParams.category\" class=\"filter-select\">\n            <option value=\"All\">All</option>\n            <option\n              v-for=\"category in categories\"\n              :key=\"category.id\"\n              :value=\"category.id\"\n            >\n              {{ category.name }}\n            </option>\n          </select>\n        </div>\n\n        <div class=\"filter-item\">\n          <label for=\"product_name\" class=\"filter-label\">Product Name:</label>\n          <input\n            type=\"text\"\n            v-model=\"searchParams.product_name\"\n            class=\"filter-input\"\n          />\n        </div>\n\n        <div class=\"filter-item\">\n          <label for=\"manufacture_date\" class=\"filter-label\"\n            >Manufacture Date:</label\n          >\n          <input\n            type=\"date\"\n            v-model=\"searchParams.manufacture_date\"\n            class=\"filter-input\"\n          />\n        </div>\n\n        <div class=\"filter-item\">\n          <label for=\"expiry_date\" class=\"filter-label\">Expiry Date:</label>\n          <input\n            type=\"date\"\n            v-model=\"searchParams.expiry_date\"\n            class=\"filter-input\"\n          />\n        </div>\n\n        <div class=\"filter-item\">\n          <label for=\"min_price\" class=\"filter-label\">Min Price:</label>\n          <input\n            type=\"number\"\n            v-model=\"searchParams.min_price\"\n            class=\"filter-input\"\n          />\n        </div>\n\n        <div class=\"filter-item\">\n          <label for=\"max_price\" class=\"filter-label\">Max Price:</label>\n          <input\n            type=\"number\"\n            v-model=\"searchParams.max_price\"\n            class=\"filter-input\"\n          />\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <button type=\"submit\" class=\"search-button\">Search</button>\n      </div>\n    </form>\n\n    <div v-if=\"products.length > 0\" class=\"search-results\">\n      <h3 class=\"result-title\">Search Results:</h3>\n      <ul>\n        <li v-for=\"product in products\" :key=\"product.id\" class=\"result-item\">\n          <p class=\"product-name\">{{ product.name }}</p>\n          <p v-if=\"product.manufacture_date\">\n            Manufacture Date: {{ product.manufacture_date }}\n          </p>\n\n          <p v-else>Manufacturer: Not Available</p>\n          <p v-if=\"product.expiry_date\">\n            Expiry Date: {{ product.expiry_date }}\n          </p>\n          <p v-else>Expiry Date: Not Available</p>\n          <p class=\"stock-status\">\n            Stock Availability:\n            {{ product.stock > 0 ? \"In Stock\" : \"Out of Stock\" }}\n          </p>\n          <p>Category: {{ product.category.name }}</p>\n          <p class=\"product-price\">Price: {{ product.price }}</p>\n        </li>\n      </ul>\n    </div>\n    <div v-else class=\"no-results\">No products Found</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"searchProduct\",\n  data() {\n    return {\n      searchParams: {\n        stock: false,\n        category: null,\n        product_name: \"\",\n        manufacture_date: \"\",\n        expiry_date: \"\",\n        min_price: null,\n        max_price: null,\n      },\n      products: [],\n      categories: [],\n      errorMessage: \"\",\n    };\n  },\n  computed: {\n    currentUserEmail() {\n      return this.$store.state.currentUserEmail;\n    },\n    isProductOwner() {\n      return this.$store.state.currentUserId == this.product.user_id;\n    },\n    currentUserId() {\n      return this.$store.state.currentUserId;\n    },\n    currentUserName() {\n      return this.$store.state.currentUsername;\n    },\n    isUser() {\n      return this.account.roles.includes(\"<Role 2>\");\n    },\n  },\n  mounted() {\n    this.fetchCategories();\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const response = await fetch(\"http://localhost:5000/api/getCategory\");\n        const data = await response.json();\n        this.categories = data;\n        if (!this.isProductOwner) {\n          alert(\"You are not authorized to view this page\");\n          this.$router.push(\"/\");\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch categories:\", error);\n      }\n    },\n    async searchProducts() {\n      try {\n        const formData = new FormData();\n        Object.entries(this.searchParams).forEach(([key, value]) => {\n          if (value !== null && value !== undefined && value !== \"\") {\n            formData.append(key, value);\n          }\n        });\n        formData.append(\"stock\", this.searchParams.stock);\n\n        const response = await fetch(\"http://localhost:5000/api/search\", {\n          method: \"POST\",\n          body: formData,\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Failed to fetch products\");\n        }\n\n        const responseData = await response.json();\n        this.products = responseData;\n        this.errorMessage = \"\";\n      } catch (error) {\n        this.products = [];\n        console.log(\"Error:\", error);\n        this.errorMessage = error.message || \"Failed to fetch products\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.search-container {\n  margin: 20px;\n  background: linear-gradient(to right, #4cd06b, #0db8e8);\n  padding: 20px;\n}\n\nbutton {\n  background-color: #1ec646;\n  color: white;\n  padding: 8px 16px;\n  border: none;\n  text-decoration: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.page-title {\n  color: #333;\n  text-decoration: underline;\n  text-align: center;\n}\n\n.search-form {\n  background-color: #fff;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin: 20px 0;\n}\n\n.filter-section {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.filter-item {\n  width: calc(33.33% - 20px);\n  margin: 10px;\n}\n\n.filter-label {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n  color: #333;\n}\n\n.filter-select,\n.filter-input,\n.search-button {\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  margin-top: 5px;\n}\n\n.search-results {\n  margin-top: 20px;\n}\n\n.result-title {\n  color: #333;\n}\n\n.result-item {\n  background-color: #fff;\n  padding: 15px;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.product-name {\n  font-weight: bold;\n}\n\n.stock-status {\n  color: #28a745;\n}\n.back-button {\n  background-color: black;\n  color: white;\n  padding: 8px 16px;\n  border: none;\n  text-decoration: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n.search-button {\n  width: 80px;\n  margin-left: 600px;\n}\n.product-price {\n  color: #24b7e0;\n}\n\n.no-results {\n  color: black;\n  margin-top: 20px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}